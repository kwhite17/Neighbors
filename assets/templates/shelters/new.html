{{define "main-content"}}
    <h1>Shelter Registration</h1>
    <form id="createForm">
        <div class="form-group">
            <label for="shelterName">Shelter Name</label>
            <input type="text" class="form-control" name="name" placeholder="Shelter Name" id="shelterName">
        </div>
        <div class="form-group">
            <label for="shelterStreet">Street Address</label>
            <input type="text" class="form-control" name="street" placeholder="Street Address" id="shelterStreet">
        </div>
        <div class="form-group">
            <label for="shelterPassword">Password</label>
            <input type="password" class="form-control" name="password" placeholder="Password" id="shelterPassword">
        </div>
        <div class="form-group">
            <label for="shelterCity">City</label>
            <input type="text" class="form-control" name="city" placeholder="City" id="shelterCity">
        </div>
        <div class="form-group">
            <label for="shelterState">State</label>
            <input type="text" class="form-control" name="state" placeholder="State" id="shelterState">
        </div>
        <div class="form-group">
            <label for="shelterZip">Postal Code</label>
            <input type="text" class="form-control" name="postalCode" placeholder="Postal Code" id="shelterZip">
        </div>
        <div class="form-group">
            <label for="shelterCountry">Country</label>
            <input type="text" class="form-control" name="country" placeholder="Country" id="shelterCountry">
        </div>
        <button type="button" class="btn btn-primary" onclick="createShelter()">Register Shelter</button>
    </form>
{{end}}

{{define "script-content"}}
    <script type="text/javascript">
        var createShelter = function () {
            var req = new XMLHttpRequest();
            req.withCredentials = true;
            var formElements = document.getElementById('createForm').elements;
            var elementUpdate = {
                Name: formElements.namedItem('name').value,
                Password: formElements.namedItem('password').value,
                Street: formElements.namedItem('street').value,
                City: formElements.namedItem('city').value,
                State: formElements.namedItem('state').value,
                PostalCode: formElements.namedItem('postalCode').value,
                Country: formElements.namedItem('country').value,
            };

            req.open("POST", window.location.origin + '/shelters/');
            req.onreadystatechange = function () {
                if (req.readyState === 4 && req.status === 200) {
                    var response = JSON.parse(req.response);
                    window.location = window.location.origin + '/shelters/' + response.ID;
                    return false;
                } else if (req.readyState === 4 && req.status !== 200) {
                    alert("Failed to update shelter!");
                    return false;
                }
            };

            req.send(JSON.stringify(elementUpdate));

            return false;
        };
    </script>
{{end}}