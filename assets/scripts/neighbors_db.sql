CREATE TABLE IF NOT EXISTS userTypes (
    ID INTEGER PRIMARY KEY,
    TypeName VARCHAR(20) NOT NULL
);

CREATE TABLE IF NOT EXISTS users (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Name VARCHAR(100) NOT NULL,
    Email VARCHAR(100) NOT NULL,
    Password VARCHAR(100) NOT NULL,
    City VARCHAR(100) NULL,
    PostalCode VARCHAR(100) NULL,
    State VARCHAR(100) NULL,
    Street VARCHAR(100) NULL,
    UserType TINYINT NOT NULL DEFAULT 1,
    FOREIGN KEY(UserType) REFERENCES userTypes(ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS items (
    ID INTEGER PRIMARY KEY AUTOINCREMENT,
    Category VARCHAR(100) NOT NULL,
    Gender VARCHAR(100) NOT NULL,
    Quantity TINYINT NOT NULL,
    Size VARCHAR(100) NOT NULL,
    Status VARCHAR(100) NOT NULL,
    ShelterID INTEGER NOT NULL,
    SamaritanID INTEGER NULL,
    FOREIGN KEY(ShelterID) REFERENCES users(ID) ON DELETE CASCADE,
    FOREIGN KEY(SamaritanID) REFERENCES users(ID) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS userSessions (
    SessionKey VARCHAR(50) PRIMARY KEY,
    UserID INTEGER NOT NULL,
    UserType TINYINT NOT NULL,
    LoginTime BIGINT NOT NULL,
    LastSeenTime BIGINT NOT NULL,
    FOREIGN KEY(UserID) REFERENCES users(ID) ON DELETE CASCADE,
    FOREIGN KEY(UserType) REFERENCES userTypes(ID) ON DELETE CASCADE
);

INSERT INTO userTypes VALUES (1, "SHELTER");
INSERT INTO userTypes VALUES (2, "SAMARITAN");
